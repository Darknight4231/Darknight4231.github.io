<!DOCTYPE html>
<head>
</head>

<body>
  <a href="https://alligator.io/js/var-let-const">https://alligator.io/js/var-let-const</a><br/>
  <a href="https://alligator.io/js/first-steps-web-audio-api/">https://alligator.io/js/first-steps-web-audio-api/</a>
  <button type="button" id="Start">Start</button>
  <input type="range" id="Volume" value="0" min="0" max="100"> <label for="Volume">Volume</label>
  <input type="range" id="Freq" value="2400" min="0" max="4800" step="5" label='Freq'>Frequency<br/>
  <input type="radio" id="">

<script>
//from https://alligator.io/js/first-steps-web-audio-api/
//setValueAtTime(value, Time)
//setTargetAtTime(value, Time, timeconstant (rate of change ;P) )

//gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)

/*let musicContext = new AudioContext({
  latencyHint: "playback",
  sampleRate: 48000
});
*/

//audioContext.createMediaElementSource(mediaElement) fires from HTML media (audio/video) element
// ^^^ https://webaudio.github.io/web-audio-api/#mediaelementaudiosourcenode
let audioContext;


try {
  audioContext =
    new (window.AudioContext || window.webkitAudioContext)();
} catch (error) {
  window.alert(
    `Sorry, but your browser doesn't support the Web Audio API!`
  );
}

if (audioContext !== undefined) {
  /* Our code goes here */
  const Gainvalue = document.getElementById("Volume");
  const PlayPause = document.getElementById("Start");
  const Frequ = document.getElementById("Freq");


  Gainvalue.onchange = function(){
    gainchange(Gainvalue.value);
  };
  Frequ.onchange = function(){
    Freqchange(Freq.value);
  };

//audioContext.contextTime

  const gainNode = audioContext.createGain();
  const oscillator = audioContext.createOscillator();

 oscillator.type = 'square';


  function Freqchange(e){
   oscillator.frequency.setValueAtTime(e, audioContext.currentTime);
  };

  oscillator.connect(gainNode);

    function gainchange(e) {
      gainNode.gain.setValueAtTime(e/100, audioContext.currentTime);
    };
    gainNode.connect(audioContext.destination);




  function Cease(e){
    oscillator.stop();
  };
  oscillator.start();
  gainchange(1);
}

</script>
</body>
